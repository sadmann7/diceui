{
  "name": "mention-controlled-demo",
  "dependencies": [
    "@diceui/mention"
  ],
  "files": [
    {
      "path": "examples/mention-controlled-demo.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Mention,\n  MentionContent,\n  MentionInput,\n  MentionItem,\n} from \"@/registry/default/ui/mention\";\n\nconst users = [\n  {\n    id: \"1\",\n    name: \"Olivia Martin\",\n    email: \"olivia@email.com\",\n  },\n  {\n    id: \"2\",\n    name: \"Isabella Nguyen\",\n    email: \"isabella@email.com\",\n  },\n  {\n    id: \"3\",\n    name: \"Emma Wilson\",\n    email: \"emma@email.com\",\n  },\n  {\n    id: \"4\",\n    name: \"Jackson Lee\",\n    email: \"jackson@email.com\",\n  },\n  {\n    id: \"5\",\n    name: \"William Kim\",\n    email: \"will@email.com\",\n  },\n];\n\ninterface Message {\n  id: string;\n  content: string;\n  mentions: string[];\n}\n\nfunction renderMessageContent(content: string, mentions: string[]) {\n  if (mentions.length === 0) return content;\n\n  const escaped = mentions.map((n) => n.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"));\n  const pattern = new RegExp(`(@(?:${escaped.join(\"|\")}))`, \"g\");\n\n  return content.split(pattern).map((part, i) =>\n    part.startsWith(\"@\") && mentions.includes(part.slice(1)) ? (\n      <span\n        key={i}\n        className=\"rounded bg-blue-200 py-px text-blue-950 dark:bg-blue-800 dark:text-blue-50\"\n      >\n        {part}\n      </span>\n    ) : (\n      part\n    )\n  );\n}\n\nexport default function MentionControlledDemo() {\n  const [open, setOpen] = React.useState(false);\n  const [value, setValue] = React.useState<string[]>([]);\n  const [inputValue, setInputValue] = React.useState(\"\");\n  const [messages, setMessages] = React.useState<Message[]>([]);\n\n  function onSend() {\n    if (!inputValue.trim()) return;\n\n    setMessages((prev) => [\n      ...prev,\n      {\n        id: crypto.randomUUID(),\n        content: inputValue,\n        mentions: value,\n      },\n    ]);\n    setInputValue(\"\");\n    setValue([]);\n  }\n\n  return (\n    <div className=\"grid h-full w-full max-w-[400px] grid-rows-[1fr_auto_1fr] gap-3\">\n      <div className=\"relative flex flex-col justify-end overflow-y-hidden\">\n        <div className=\"pointer-events-none absolute inset-x-0 top-0 z-10 h-12 bg-linear-to-b from-white to-transparent dark:from-fd-background\" />\n        {messages.length > 0 && (\n          <div className=\"flex flex-col gap-2\">\n            {messages.map((message) => (\n              <div\n                key={message.id}\n                className=\"rounded-md border border-zinc-200 bg-zinc-50 p-3 text-sm dark:border-zinc-800 dark:bg-zinc-900\"\n              >\n                <p className=\"whitespace-pre-wrap text-zinc-900 dark:text-zinc-100\">\n                  {renderMessageContent(message.content, message.mentions)}\n                </p>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n      <div className=\"flex flex-col gap-3\">\n        <Mention\n          open={open}\n          onOpenChange={setOpen}\n          value={value}\n          onValueChange={setValue}\n          inputValue={inputValue}\n          onInputValueChange={setInputValue}\n        >\n          <MentionInput placeholder=\"Type @ to mention someone...\" asChild>\n            <Textarea />\n          </MentionInput>\n          <MentionContent>\n            {users.map((user) => (\n              <MentionItem\n                key={user.id}\n                value={user.name}\n                className=\"flex-col items-start gap-0.5\"\n              >\n                <span className=\"text-sm\">{user.name}</span>\n                <span className=\"text-muted-foreground text-xs\">\n                  {user.email}\n                </span>\n              </MentionItem>\n            ))}\n          </MentionContent>\n        </Mention>\n        <Button onClick={onSend} disabled={!inputValue.trim()}>\n          Send\n        </Button>\n      </div>\n      <div />\n    </div>\n  );\n}\n",
      "type": "registry:example",
      "target": ""
    }
  ],
  "type": "registry:example"
}