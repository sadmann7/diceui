{
  "name": "circular-progress",
  "type": "registry:ui",
  "dependencies": [
    "@radix-ui/react-slot"
  ],
  "files": [
    {
      "path": "ui/circular-progress.tsx",
      "content": "\"use client\";\n\nimport { Slot } from \"@radix-ui/react-slot\";\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst CIRCULAR_PROGRESS_NAME = \"CircularProgress\";\nconst INDICATOR_NAME = \"CircularProgressIndicator\";\nconst TRACK_NAME = \"CircularProgressTrack\";\nconst RANGE_NAME = \"CircularProgressRange\";\nconst LABEL_NAME = \"CircularProgressLabel\";\nconst VALUE_TEXT_NAME = \"CircularProgressValueText\";\n\nconst DEFAULT_MAX = 100;\n\ntype ProgressState = \"indeterminate\" | \"complete\" | \"loading\";\n\ninterface CircularProgressContextValue {\n  value: number | null;\n  onValueChange?(value: number | null): void;\n  max: number;\n  min: number;\n  valueLabel: string | undefined;\n  state: ProgressState;\n  radius: number;\n  trackWidth: number;\n  size: number;\n}\n\nconst CircularProgressContext =\n  React.createContext<CircularProgressContextValue | null>(null);\n\nfunction useCircularProgressContext(consumerName: string) {\n  const context = React.useContext(CircularProgressContext);\n  if (!context) {\n    throw new Error(\n      `\\`${consumerName}\\` must be used within \\`${CIRCULAR_PROGRESS_NAME}\\``,\n    );\n  }\n  return context;\n}\n\ninterface CircularProgressRootProps extends React.ComponentProps<\"div\"> {\n  value?: number | null | undefined;\n  onValueChange?(value: number | null): void;\n  getValueLabel?(value: number, max: number): string;\n  max?: number;\n  min?: number;\n  size?: number;\n  trackWidth?: number;\n  asChild?: boolean;\n}\n\nfunction getProgressState(\n  value: number | undefined | null,\n  maxValue: number,\n): ProgressState {\n  return value == null\n    ? \"indeterminate\"\n    : value === maxValue\n      ? \"complete\"\n      : \"loading\";\n}\n\nfunction isNumber(value: unknown): value is number {\n  return typeof value === \"number\";\n}\n\nfunction isValidMaxNumber(max: unknown): max is number {\n  return isNumber(max) && !Number.isNaN(max) && max > 0;\n}\n\nfunction isValidValueNumber(\n  value: unknown,\n  max: number,\n  min: number,\n): value is number {\n  return (\n    isNumber(value) && !Number.isNaN(value) && value <= max && value >= min\n  );\n}\n\nfunction defaultGetValueLabel(value: number, max: number) {\n  return `${Math.round((value / max) * 100)}%`;\n}\n\nfunction getInvalidMaxError(propValue: string, componentName: string) {\n  return `Invalid prop \\`max\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. Only numbers greater than 0 are valid max values. Defaulting to \\`${DEFAULT_MAX}\\`.`;\n}\n\nfunction getInvalidValueError(propValue: string, componentName: string) {\n  return `Invalid prop \\`value\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. The \\`value\\` prop must be:\n  - a positive number\n  - less than the value passed to \\`max\\` (or ${DEFAULT_MAX} if no \\`max\\` prop is set)\n  - greater than or equal to the value passed to \\`min\\`\n  - \\`null\\` or \\`undefined\\` if the progress is indeterminate.\n\nThe value will be clamped to the valid range or set to null if invalid.`;\n}\n\nfunction CircularProgressRoot(props: CircularProgressRootProps) {\n  const {\n    value: valueProp = null,\n    max: maxProp,\n    min: minProp = 0,\n    size = 48,\n    trackWidth = 4,\n    onValueChange,\n    getValueLabel = defaultGetValueLabel,\n    asChild,\n    className,\n    ...progressProps\n  } = props;\n\n  if ((maxProp || maxProp === 0) && !isValidMaxNumber(maxProp)) {\n    console.error(getInvalidMaxError(`${maxProp}`, CIRCULAR_PROGRESS_NAME));\n  }\n\n  const max = isValidMaxNumber(maxProp) ? maxProp : DEFAULT_MAX;\n  const min = isNumber(minProp) ? minProp : 0;\n\n  if (valueProp !== null && !isValidValueNumber(valueProp, max, min)) {\n    console.error(getInvalidValueError(`${valueProp}`, CIRCULAR_PROGRESS_NAME));\n  }\n\n  const value = isValidValueNumber(valueProp, max, min)\n    ? valueProp\n    : isNumber(valueProp) && valueProp > max\n      ? max\n      : isNumber(valueProp) && valueProp < min\n        ? min\n        : null;\n  const valueLabel = isNumber(value) ? getValueLabel(value, max) : undefined;\n  const state = getProgressState(value, max);\n  const radius = (size - trackWidth) / 2;\n\n  const contextValue = React.useMemo<CircularProgressContextValue>(\n    () => ({\n      value,\n      onValueChange,\n      valueLabel,\n      max,\n      min,\n      state,\n      radius,\n      trackWidth,\n      size,\n    }),\n    [\n      value,\n      onValueChange,\n      valueLabel,\n      max,\n      min,\n      state,\n      radius,\n      trackWidth,\n      size,\n    ],\n  );\n\n  const RootPrimitive = asChild ? Slot : \"div\";\n\n  return (\n    <CircularProgressContext.Provider value={contextValue}>\n      <RootPrimitive\n        role=\"progressbar\"\n        aria-valuemax={max}\n        aria-valuemin={min}\n        aria-valuenow={isNumber(value) ? value : undefined}\n        aria-valuetext={valueLabel}\n        data-state={state}\n        data-value={value ?? undefined}\n        data-max={max}\n        data-min={min}\n        {...progressProps}\n        className={cn(\n          \"relative inline-flex items-center justify-center\",\n          className,\n        )}\n      />\n    </CircularProgressContext.Provider>\n  );\n}\n\nfunction CircularProgressIndicator(props: React.ComponentProps<\"svg\">) {\n  const { className, ...indicatorProps } = props;\n  const context = useCircularProgressContext(INDICATOR_NAME);\n\n  return (\n    <svg\n      width={context.size}\n      height={context.size}\n      viewBox={`0 0 ${context.size} ${context.size}`}\n      data-state={context.state}\n      data-value={context.value ?? undefined}\n      data-max={context.max}\n      data-min={context.min}\n      {...indicatorProps}\n      className={cn(\"-rotate-90 transform\", className)}\n    />\n  );\n}\n\nfunction CircularProgressTrack(props: React.ComponentProps<\"circle\">) {\n  const { className, ...trackProps } = props;\n  const context = useCircularProgressContext(TRACK_NAME);\n\n  const center = context.size / 2;\n\n  return (\n    <circle\n      cx={center}\n      cy={center}\n      r={context.radius}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={context.trackWidth}\n      data-state={context.state}\n      {...trackProps}\n      className={cn(\"text-muted-foreground/20\", className)}\n    />\n  );\n}\n\nfunction CircularProgressRange(props: React.ComponentProps<\"circle\">) {\n  const { className, ...rangeProps } = props;\n  const context = useCircularProgressContext(RANGE_NAME);\n\n  const center = context.size / 2;\n  const circumference = 2 * Math.PI * context.radius;\n\n  let strokeDasharray = circumference;\n  let strokeDashoffset = circumference;\n\n  if (context.state === \"indeterminate\") {\n    // For indeterminate, show 25% of the circle as an arc\n    strokeDasharray = circumference;\n    strokeDashoffset = circumference * 0.75; // Show 25% (hide 75%)\n  } else if (context.value !== null) {\n    const normalizedValue =\n      ((context.value - context.min) / (context.max - context.min)) * 100;\n    const progress = (normalizedValue / 100) * circumference;\n    strokeDashoffset = circumference - progress;\n  }\n\n  return (\n    <circle\n      cx={center}\n      cy={center}\n      r={context.radius}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth={context.trackWidth}\n      strokeLinecap=\"round\"\n      strokeDasharray={strokeDasharray}\n      strokeDashoffset={strokeDashoffset}\n      data-state={context.state}\n      data-value={context.value ?? undefined}\n      data-max={context.max}\n      data-min={context.min}\n      {...rangeProps}\n      className={cn(\n        \"text-primary transition-all duration-300 ease-in-out\",\n        context.state === \"indeterminate\" &&\n          \"[animation:var(--animate-spin-around)]\",\n        className,\n      )}\n      style={{\n        ...rangeProps.style,\n        transformOrigin: \"center\",\n      }}\n    />\n  );\n}\n\ninterface CircularProgressLabelProps extends React.ComponentProps<\"span\"> {\n  asChild?: boolean;\n}\n\nfunction CircularProgressLabel(props: CircularProgressLabelProps) {\n  const { asChild, className, ...labelProps } = props;\n  const context = useCircularProgressContext(LABEL_NAME);\n\n  const LabelPrimitive = asChild ? Slot : \"span\";\n\n  return (\n    <LabelPrimitive\n      data-state={context.state}\n      {...labelProps}\n      className={cn(\n        \"absolute inset-0 flex items-center justify-center font-medium text-sm\",\n        className,\n      )}\n    />\n  );\n}\n\ninterface CircularProgressValueTextProps extends React.ComponentProps<\"span\"> {\n  asChild?: boolean;\n}\n\nfunction CircularProgressValueText(props: CircularProgressValueTextProps) {\n  const { asChild, className, children, ...valueTextProps } = props;\n  const context = useCircularProgressContext(VALUE_TEXT_NAME);\n\n  const ValueTextPrimitive = asChild ? Slot : \"span\";\n\n  return (\n    <ValueTextPrimitive\n      data-state={context.state}\n      {...valueTextProps}\n      className={cn(\n        \"absolute inset-0 flex items-center justify-center font-medium text-sm\",\n        className,\n      )}\n    >\n      {children ?? context.valueLabel}\n    </ValueTextPrimitive>\n  );\n}\n\nexport {\n  CircularProgressRoot as Root,\n  CircularProgressIndicator as Indicator,\n  CircularProgressTrack as Track,\n  CircularProgressRange as Range,\n  CircularProgressLabel as Label,\n  CircularProgressValueText as ValueText,\n  //\n  CircularProgressRoot as CircularProgress,\n  CircularProgressIndicator,\n  CircularProgressTrack,\n  CircularProgressRange,\n  CircularProgressLabel,\n  CircularProgressValueText,\n  //\n  type CircularProgressRootProps as CircularProgressProps,\n};\n",
      "type": "registry:ui",
      "target": ""
    }
  ],
  "cssVars": {
    "theme": {
      "--animate-spin-around": "spin-around 0.8s linear infinite"
    }
  },
  "css": {
    "@keyframes spin-around": {
      "0%": {
        "transform": "rotate(-90deg)"
      },
      "100%": {
        "transform": "rotate(270deg)"
      }
    }
  }
}