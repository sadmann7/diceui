{
  "name": "fps",
  "type": "registry:component",
  "dependencies": [
    "class-variance-authority"
  ],
  "registryDependencies": [
    "utils"
  ],
  "files": [
    {
      "path": "components/fps.tsx",
      "content": "\"use client\";\n\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { cn } from \"@/lib/utils\";\n\nconst fpsVariants = cva(\n  \"fixed z-50 flex items-center gap-2 rounded-md bg-black/80 px-3 py-1.5 font-mono text-sm text-white backdrop-blur-sm\",\n  {\n    variants: {\n      position: {\n        \"top-left\": \"top-4 left-4\",\n        \"top-right\": \"top-4 right-4\",\n        \"bottom-left\": \"bottom-4 left-4\",\n        \"bottom-right\": \"right-4 bottom-4\",\n      },\n      status: {\n        good: \"text-primary\",\n        warning: \"text-orange-500\",\n        error: \"text-destructive\",\n      },\n    },\n    defaultVariants: {\n      position: \"top-right\",\n      status: \"good\",\n    },\n  },\n);\n\ninterface FpsProps\n  extends React.ComponentProps<\"div\">,\n    Omit<VariantProps<typeof fpsVariants>, \"status\"> {\n  label?: string;\n  enabled?: boolean;\n  updateInterval?: number;\n  warningThreshold?: number;\n  errorThreshold?: number;\n  portalContainer?: Element | DocumentFragment | null;\n}\n\nfunction Fps(props: FpsProps) {\n  const {\n    enabled = true,\n    updateInterval = 500,\n    position = \"top-right\",\n    label,\n    warningThreshold = 30,\n    errorThreshold = 20,\n    portalContainer: portalContainerProp,\n    className,\n    ...fpsProps\n  } = props;\n\n  const labelId = React.useId();\n  const [fps, setFps] = React.useState(0);\n  const frameCountRef = React.useRef(0);\n  const lastTimeRef = React.useRef(performance.now());\n  const animationFrameRef = React.useRef<number | null>(null);\n  const updateTimeoutRef = React.useRef<ReturnType<typeof setTimeout> | null>(\n    null,\n  );\n  const [mounted, setMounted] = React.useState(false);\n  React.useLayoutEffect(() => setMounted(true), []);\n\n  const status = React.useMemo(() => {\n    if (fps < errorThreshold) return \"error\";\n    if (fps < warningThreshold) return \"warning\";\n    return \"good\";\n  }, [fps, errorThreshold, warningThreshold]);\n\n  React.useEffect(() => {\n    if (!enabled || typeof window === \"undefined\") return;\n\n    function measureFps() {\n      const now = performance.now();\n      const delta = now - lastTimeRef.current;\n      frameCountRef.current += 1;\n\n      if (delta >= updateInterval) {\n        const currentFps = Math.round((frameCountRef.current * 1000) / delta);\n        setFps(currentFps);\n        frameCountRef.current = 0;\n        lastTimeRef.current = now;\n      }\n\n      animationFrameRef.current = requestAnimationFrame(measureFps);\n    }\n\n    animationFrameRef.current = requestAnimationFrame(measureFps);\n\n    return () => {\n      if (animationFrameRef.current !== null) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n      if (updateTimeoutRef.current !== null) {\n        clearTimeout(updateTimeoutRef.current);\n      }\n    };\n  }, [enabled, updateInterval]);\n\n  if (!enabled) return null;\n\n  const portalContainer =\n    portalContainerProp ?? (mounted ? globalThis.document?.body : null);\n\n  if (!portalContainer) return null;\n\n  return ReactDOM.createPortal(\n    <div\n      role=\"status\"\n      aria-live=\"polite\"\n      aria-labelledby={label ? labelId : undefined}\n      {...fpsProps}\n      className={cn(fpsVariants({ position, status }), className)}\n    >\n      {label && (\n        <span id={labelId} className=\"text-muted-foreground\">\n          {label}:\n        </span>\n      )}\n      <span>{fps}</span>\n    </div>,\n    portalContainer,\n  );\n}\n\nexport { Fps };\n",
      "type": "registry:component",
      "target": ""
    }
  ]
}