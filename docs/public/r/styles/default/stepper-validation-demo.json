{
  "name": "stepper-validation-demo",
  "type": "registry:example",
  "dependencies": [
    "@hookform/resolvers",
    "react-hook-form",
    "sonner",
    "zod"
  ],
  "registryDependencies": [
    "form"
  ],
  "files": [
    {
      "path": "examples/stepper-validation-demo.tsx",
      "content": "\"use client\";\r\n\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport * as React from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { toast } from \"sonner\";\r\nimport * as z from \"zod\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport {\r\n  Stepper,\r\n  StepperContent,\r\n  StepperDescription,\r\n  StepperIndicator,\r\n  StepperItem,\r\n  StepperList,\r\n  StepperNextTrigger,\r\n  StepperPrevTrigger,\r\n  type StepperProps,\r\n  StepperSeparator,\r\n  StepperTitle,\r\n  StepperTrigger,\r\n} from \"@/registry/default/ui/stepper\";\r\n\r\nconst formSchema = z.object({\r\n  username: z\r\n    .string()\r\n    .min(3, \"Username must be at least 3 characters\")\r\n    .regex(\r\n      /^[a-zA-Z0-9_]+$/,\r\n      \"Username can only contain letters, numbers, and underscores\",\r\n    ),\r\n  email: z.email(\"Please enter a valid email address\"),\r\n  firstName: z.string().min(1, \"First name is required\"),\r\n  lastName: z.string().min(1, \"Last name is required\"),\r\n  bio: z.string().min(10, \"Bio must be at least 10 characters\"),\r\n});\r\n\r\ntype FormSchema = z.infer<typeof formSchema>;\r\n\r\nconst steps = [\r\n  {\r\n    value: \"account\",\r\n    title: \"Account Setup\",\r\n    description: \"Create your account\",\r\n    fields: [\"username\", \"email\"] as const,\r\n  },\r\n  {\r\n    value: \"profile\",\r\n    title: \"Profile Info\",\r\n    description: \"Complete your profile\",\r\n    fields: [\"firstName\", \"lastName\", \"bio\"] as const,\r\n  },\r\n  {\r\n    value: \"review\",\r\n    title: \"Review\",\r\n    description: \"Review your information\",\r\n    fields: [] as const,\r\n  },\r\n];\r\n\r\nexport default function StepperValidationDemo() {\r\n  const [currentStep, setCurrentStep] = React.useState(\"account\");\r\n\r\n  const form = useForm<FormSchema>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: {\r\n      username: \"\",\r\n      email: \"\",\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      bio: \"\",\r\n    },\r\n  });\r\n\r\n  const currentIndex = React.useMemo(\r\n    () => steps.findIndex((step) => step.value === currentStep),\r\n    [currentStep],\r\n  );\r\n\r\n  const onValidate: NonNullable<StepperProps[\"onValidate\"]> = React.useCallback(\r\n    async (_value, direction) => {\r\n      if (direction === \"prev\") return true;\r\n\r\n      const currentStepData = steps.find((s) => s.value === currentStep);\r\n      if (!currentStepData) return true;\r\n\r\n      const isValid = await form.trigger(currentStepData.fields);\r\n\r\n      if (!isValid) {\r\n        toast.info(\"Please complete all required fields to continue\", {\r\n          description: \"Fix the validation errors and try again.\",\r\n        });\r\n      }\r\n\r\n      return isValid;\r\n    },\r\n    [form, currentStep],\r\n  );\r\n\r\n  const onValueChange = React.useCallback((value: string) => {\r\n    setCurrentStep(value);\r\n  }, []);\r\n\r\n  const onSubmit = React.useCallback((input: FormSchema) => {\r\n    toast.success(\r\n      <pre className=\"w-full\">{JSON.stringify(input, null, 2)}</pre>,\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form onSubmit={form.handleSubmit(onSubmit)}>\r\n        <Stepper\r\n          value={currentStep}\r\n          onValueChange={onValueChange}\r\n          onValidate={onValidate}\r\n        >\r\n          <StepperList>\r\n            {steps.map((step) => (\r\n              <StepperItem key={step.value} value={step.value}>\r\n                <StepperTrigger>\r\n                  <StepperIndicator />\r\n                  <div className=\"flex flex-col gap-1\">\r\n                    <StepperTitle>{step.title}</StepperTitle>\r\n                    <StepperDescription>{step.description}</StepperDescription>\r\n                  </div>\r\n                </StepperTrigger>\r\n                <StepperSeparator className=\"mx-4\" />\r\n              </StepperItem>\r\n            ))}\r\n          </StepperList>\r\n          <StepperContent\r\n            value=\"account\"\r\n            className=\"flex flex-col gap-4 rounded-md border bg-card p-4 text-card-foreground\"\r\n          >\r\n            <FormField\r\n              control={form.control}\r\n              name=\"username\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Username</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"Enter username\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n            <FormField\r\n              control={form.control}\r\n              name=\"email\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Email</FormLabel>\r\n                  <FormControl>\r\n                    <Input type=\"email\" placeholder=\"Enter email\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </StepperContent>\r\n          <StepperContent\r\n            value=\"profile\"\r\n            className=\"flex flex-col gap-4 rounded-md border bg-card p-4 text-card-foreground\"\r\n          >\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <FormField\r\n                control={form.control}\r\n                name=\"firstName\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>First Name</FormLabel>\r\n                    <FormControl>\r\n                      <Input placeholder=\"Enter first name\" {...field} />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n              <FormField\r\n                control={form.control}\r\n                name=\"lastName\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Last Name</FormLabel>\r\n                    <FormControl>\r\n                      <Input placeholder=\"Enter last name\" {...field} />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n            </div>\r\n            <FormField\r\n              control={form.control}\r\n              name=\"bio\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Bio</FormLabel>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"Tell us about yourself...\"\r\n                      className=\"min-h-[80px]\"\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n          </StepperContent>\r\n          <StepperContent\r\n            value=\"review\"\r\n            className=\"grid grid-cols-2 gap-4 rounded-md border bg-card p-4 text-card-foreground lg:grid-cols-3\"\r\n          >\r\n            <div className=\"flex flex-col gap-1 rounded-md border p-2\">\r\n              <span className=\"font-medium text-sm\">Username</span>\r\n              <p className=\"text-sm\">\r\n                {form.watch(\"username\") ?? \"Not provided\"}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex flex-col gap-1 rounded-md border p-2\">\r\n              <span className=\"font-medium text-sm\">Email</span>\r\n              <p className=\"text-sm\">{form.watch(\"email\") ?? \"Not provided\"}</p>\r\n            </div>\r\n            <div className=\"flex flex-col gap-1 rounded-md border p-2\">\r\n              <span className=\"font-medium text-sm\">First Name</span>\r\n              <p className=\"text-sm\">\r\n                {form.watch(\"firstName\") ?? \"Not provided\"}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex flex-col gap-1 rounded-md border p-2\">\r\n              <span className=\"font-medium text-sm\">Last Name</span>\r\n              <p className=\"text-sm\">\r\n                {form.watch(\"lastName\") ?? \"Not provided\"}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex flex-col gap-1 rounded-md border p-2\">\r\n              <span className=\"font-medium text-sm\">Bio</span>\r\n              <p className=\"text-sm\">{form.watch(\"bio\") ?? \"Not provided\"}</p>\r\n            </div>\r\n          </StepperContent>\r\n          <div className=\"flex justify-between\">\r\n            <StepperPrevTrigger asChild>\r\n              <Button type=\"button\" variant=\"outline\">\r\n                Previous\r\n              </Button>\r\n            </StepperPrevTrigger>\r\n            <div className=\"text-muted-foreground text-sm\">\r\n              Step {currentIndex + 1} of {steps.length}\r\n            </div>\r\n            {currentIndex === steps.length - 1 ? (\r\n              <Button type=\"submit\">Complete Setup</Button>\r\n            ) : (\r\n              <StepperNextTrigger asChild>\r\n                <Button type=\"button\">Next</Button>\r\n              </StepperNextTrigger>\r\n            )}\r\n          </div>\r\n        </Stepper>\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n",
      "type": "registry:example",
      "target": ""
    }
  ]
}